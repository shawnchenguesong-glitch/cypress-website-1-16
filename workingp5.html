<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P5.js 工作示例</title>
    <!-- 引入p5.js库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #000;
        }
    </style>
</head>
<body>
    <script>
        // 工作的p5.js示例：粒子系统
        
        let particles = [];
        
        function setup() {
            createCanvas(windowWidth, windowHeight);
            background(0);
            console.log('P5.js setup completed');
        }
        
        function draw() {
            background(0, 20);
            
            // 创建新粒子
            if (particles.length < 100) {
                particles.push(new Particle());
            }
            
            // 更新和显示所有粒子
            for (let i = particles.length - 1; i >= 0; i--) {
                particles[i].update();
                particles[i].display();
                
                // 移除死亡的粒子
                if (particles[i].isDead()) {
                    particles.splice(i, 1);
                }
            }
            
            // 添加调试信息
            if (frameCount % 30 === 0) {
                console.log('Frame count:', frameCount, 'Particles:', particles.length);
            }
        }
        
        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }
        
        // 粒子类
        class Particle {
            constructor() {
                this.x = random(width);
                this.y = random(height);
                this.vx = random(-2, 2);
                this.vy = random(-2, 2);
                this.life = 255;
                this.size = random(2, 8);
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.life -= 2;
                
                // 边界检测
                if (this.x < 0 || this.x > width) {
                    this.vx *= -1;
                }
                if (this.y < 0 || this.y > height) {
                    this.vy *= -1;
                }
            }
            
            display() {
                fill(255, this.life);
                noStroke();
                ellipse(this.x, this.y, this.size, this.size);
            }
            
            isDead() {
                return this.life <= 0;
            }
        }
    </script>
</body>
</html>