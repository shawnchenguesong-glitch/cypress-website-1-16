<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>创作者权限测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .btn {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
        .btn-primary {
            background-color: #007bff;
            color: white;
        }
        .btn-danger {
            background-color: #dc3545;
            color: white;
        }
        .btn-success {
            background-color: #28a745;
            color: white;
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1>创作者权限控制测试</h1>
    
    <div class="test-section">
        <h2>测试步骤</h2>
        <ol>
            <li>点击下方按钮模拟不同用户角色</li>
            <li>然后打开 <a href="creators.html" target="_blank">创作者页面</a> 查看效果</li>
            <li>测试完成后点击"清除登录状态"</li>
        </ol>
    </div>
    
    <div class="test-section">
        <h2>模拟用户登录</h2>
        <button class="btn btn-primary" onclick="loginAsAdmin()">模拟管理员登录</button>
        <button class="btn btn-success" onclick="loginAsUser()">模拟普通用户登录</button>
        <button class="btn btn-danger" onclick="logout()">清除登录状态</button>
    </div>
    
    <div class="test-section">
        <h2>预期效果</h2>
        <h3>管理员角色：</h3>
        <ul>
            <li>可以看到"添加创作者"按钮</li>
            <li>每个创作者卡片显示"编辑"和"删除"按钮</li>
            <li>可以正常添加、编辑、删除创作者</li>
        </ul>
        <h3>普通用户角色：</h3>
        <ul>
            <li>看不到"添加创作者"按钮</li>
            <li>每个创作者卡片不显示"编辑"和"删除"按钮</li>
            <li>无法添加、编辑、删除创作者</li>
        </ul>
        <h3>未登录状态：</h3>
        <ul>
            <li>看不到"添加创作者"按钮</li>
            <li>每个创作者卡片不显示"编辑"和"删除"按钮</li>
            <li>无法添加、编辑、删除创作者</li>
        </ul>
    </div>
    
    <div id="result" class="result"></div>
    
    <script>
        // 模拟管理员登录
        function loginAsAdmin() {
            const adminUser = {
                id: 'test-admin-id',
                username: 'testadmin',
                email: 'admin@test.com',
                role: 'admin',
                createdAt: new Date().toISOString()
            };
            localStorage.setItem('currentUser', JSON.stringify(adminUser));
            document.getElementById('result').innerHTML = '<strong>已登录为管理员角色</strong>';
        }
        
        // 模拟普通用户登录
        function loginAsUser() {
            const regularUser = {
                id: 'test-user-id',
                username: 'testuser',
                email: 'user@test.com',
                role: 'user',
                createdAt: new Date().toISOString()
            };
            localStorage.setItem('currentUser', JSON.stringify(regularUser));
            document.getElementById('result').innerHTML = '<strong>已登录为普通用户角色</strong>';
        }
        
        // 清除登录状态
        function logout() {
            localStorage.removeItem('currentUser');
            document.getElementById('result').innerHTML = '<strong>已清除登录状态</strong>';
        }
        
        // 页面加载时显示当前登录状态
        window.onload = function() {
            const currentUser = localStorage.getItem('currentUser');
            if (currentUser) {
                const user = JSON.parse(currentUser);
                document.getElementById('result').innerHTML = `<strong>当前登录角色：${user.role}</strong>`;
            } else {
                document.getElementById('result').innerHTML = '<strong>当前未登录</strong>';
            }
        };
    </script>
</body>
</html>